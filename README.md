# ABM: Micro–Macro Matching & Sensitivity Analysis

## Short description

This repository contains an agent‑based model (ABM) and accompanying sensitivity/visualisation scripts that examine micro–macro linkages in a small‑world matching setting. The code produces aggregated outputs and publication‑quality figures comparing three fertility / matching equations across different neighbourhood and buffering scenarios.

⸻

## Contents
	•	ABM.R — Full ABM + visualisation script. Builds ideal and buffered small‑world matching scenarios and produces combined figures. Warning: large N (e.g. 100000) can be memory‑ and CPU‑intensive.
	•	Sensitivity analysis.R — Full sensitivity analysis and visualisation. Produces the same aggregated output and alternative figure layouts.
	•	sensitivity_results_equations.rds — Example RDS output (generated by the scripts).
	•	sensitivity_agg_equations.csv — Aggregated CSV output (generated by the scripts).
	•	combined_three_equations_titles.png — Example figure produced by the scripts.

⸻

## Requirements
	•	R (>= 4.0 recommended)
	•	R packages: igraph, ggplot2, viridis, dplyr, tidyr, patchwork

## Primary outputs

The scripts save the following files to the working directory:
	•	sensitivity_results_equations.rds — full R list with per‑run and aggregated results
	•	sensitivity_agg_equations.csv — aggregated table suitable for downstream analysis
	•	combined_three_equations_titles.png — combined figure showing the three equations / scenarios

Adjust setwd() at the top of the scripts to change output locations.

⸻
<img width="2400" height="3600" alt="Figure 4" src="https://github.com/user-attachments/assets/1ce91b40-08e9-4b28-bfc5-8ed38732935b" />

